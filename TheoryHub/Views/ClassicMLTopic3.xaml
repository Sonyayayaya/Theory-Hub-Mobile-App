<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="TheoryHub.Views.ClassicMLTopic3"
             Title="Подготовка данных">
    <ScrollView>
        <VerticalStackLayout Padding="5">

            <!-- Раздел: Теория -->
            <Label Text="Теория" 
                   FontSize="22" FontAttributes="Bold" 
                   TextColor="{StaticResource Primary}" Padding="15,0,0,0"/>
            <VerticalStackLayout Spacing="10" Padding="20">
                <Label Text="    Подготовка данных — это критически важный этап процесса машинного обучения, часто занимающий до 80% времени проекта. Его цель заключается в преобразовании сырых, неструктурированных или зашумленных данных в чистый и пригодный для анализа формат, который алгоритмы машинного обучения могут эффективно обрабатывать. Качество входных данных напрямую определяет качество итоговой модели: даже самый совершенный алгоритм, обученный на некорректных или нерелевантных данных, выдаст недостоверные и бесполезные результаты. Этот этап требует глубокого понимания предметной области и тщательной работы, так как данные в реальном мире редко бывают идеальными и чаще всего содержат пропуски, ошибки, несоответствия форматов и выбросы."
                       FontSize="16" LineBreakMode="WordWrap"/>

                <Label Text="    Первым шагом подготовки обычно является сбор и консолидация данных из различных источников. Затем следует этап очистки, который включает обработку пропущенных значений. Пропуски могут быть устранены различными способами: удалением записей с недостающими данными, если их не много, или импутацией — заполнением средним, медианным значением, модой или более сложными методами с использованием предсказательных моделей. Следующая задача — работа с аномальными значениями (выбросами), которые могут как представлять ценную информацию, так и быть следствием ошибок измерения. Выбросы могут исказить статистические характеристики данных и негативно повлиять на обучение, особенно чувствительных алгоритмов. Для их выявления используют статистические методы, визуализацию и доменные знания, после чего принимается решение об их коррекции или удалении."
                        FontSize="16" LineBreakMode="WordWrap"/>

                <Label Text="    Важнейшей частью подготовки является инженерия признаков — процесс создания новых, более информативных признаков из существующих или преобразования исходных. Это может включать в себя масштабирование и нормализацию числовых данных, которая приводит признаки к сопоставимому диапазону, что необходимо для алгоритмов, чувствительных к масштабу, таких как градиентный спуск или методы, основанные на расстояниях. Для категориальных признаков применяется кодирование, например, One-Hot Encoding или Label Encoding, которое преобразует текстовые или порядковые категории в числовой формат, понятный моделям. Завершающим этапом часто является отбор признаков, направленный на исключение избыточных, слабо информативных или сильно коррелирующих между собой переменных, что помогает уменьшить риск переобучения, ускорить обучение модели и повысить ее интерпретируемость."
                       FontSize="16" LineBreakMode="WordWrap"/>

            </VerticalStackLayout>
            <BoxView HeightRequest="1" Color="LightGray" Margin="0,10"/>

            <!-- Раздел: Термины -->
            <Label Text="Термины" 
                   FontSize="22" FontAttributes="Bold" 
                   TextColor="{StaticResource Primary}" Padding="15,0,0,0"/>

            <StackLayout Spacing="10" Padding="10">
                <Frame x:Name="term1_topic3" BackgroundColor="#F0F0F0" Padding="10">
                    <Frame.GestureRecognizers>
                        <TapGestureRecognizer Tapped="OnTermFrameTapped"/>
                    </Frame.GestureRecognizers>
                    <Label Text="Импутация данных (Data Imputation)" FontSize="16" />
                </Frame>
                <Label x:Name="definition1_topic3"
                    Text="Это процесс замены пропущенных значений в наборе данных на расчетные или статистически обоснованные. Вместо удаления строк или столбцов с пропусками, что может привести к потере ценной информации, используются методы заполнения, такие как подстановка среднего, медианы или моды, а также более сложные подходы, включая предсказание пропущенных значений с помощью моделей машинного обучения на основе других признаков."
                    IsVisible="False"
                    Padding="10,20,10,10" />
            </StackLayout>

            <StackLayout Spacing="10" Padding="10">
                <Frame x:Name="term2_topic3" BackgroundColor="#F0F0F0" Padding="10">
                    <Frame.GestureRecognizers>
                        <TapGestureRecognizer Tapped="OnTermFrameTapped"/>
                    </Frame.GestureRecognizers>
                    <Label Text="Выброс (Outlier)" FontSize="16" />
                </Frame>
                <Label x:Name="definition2_topic3"
                    Text="Это точка данных, которая значительно отклоняется от других наблюдений в выборке. Выброс может быть как следствием ошибки измерения или ввода данных (артефактом), так и редким, но реальным событием (например, крупная финансовая операция). Идентификация и корректная обработка выбросов критически важна, так как они могут сильно искажать статистические показатели (среднее значение, дисперсию) и негативно влиять на производительность многих моделей машинного обучения, делая их менее устойчивыми и точными."
                    IsVisible="False"
                    Padding="10,20,10,10" />
            </StackLayout>

            <BoxView HeightRequest="1" Color="LightGray" Margin="0,10"/>

            <!-- Раздел: Вопросы -->
            <Label Text="Вопросы для самопроверки" 
                   FontSize="22" FontAttributes="Bold" 
                   TextColor="{StaticResource Primary}" Padding="15,0,0,0"/>

            <StackLayout Spacing="10" Padding="10">
                <Frame x:Name="question1_topic3" BackgroundColor="#F0F0F0" Padding="10">
                    <Frame.GestureRecognizers>
                        <TapGestureRecognizer Tapped="OnQuestionFrameTapped"/>
                    </Frame.GestureRecognizers>
                    <Label Text="Почему масштабирование числовых признаков является важным этапом для многих алгоритмов машинного обучения?" FontSize="16"/>
                </Frame>
                <Label x:Name="answer1_topic3" 
                   Text="Масштабирование важно, потому что многие алгоритмы, такие как метод опорных векторов, градиентный спуск в нейронных сетях или алгоритмы, основанные на расчете расстояний (k-NN, k-средних), чувствительны к разнице в масштабах признаков. Признак с большим диапазоном значений (например, зарплата в десятках тысяч) будет необоснованно доминировать над признаком с малым диапазоном (например, возраст), что исказит метрики расстояния и градиенты, приведя к некорректному или медленному обучению модели. Масштабирование устраняет эту проблему, приводя все числовые признаки к единому диапазону, например, от 0 до 1 или к нормальному распределению."
                   IsVisible="False"
                   Padding="10,20,10,10" />
            </StackLayout>

            <StackLayout Spacing="10" Padding="10">
                <Frame x:Name="question2_topic3" BackgroundColor="#F0F0F0" Padding="10">
                    <Frame.GestureRecognizers>
                        <TapGestureRecognizer Tapped="OnQuestionFrameTapped"/>
                    </Frame.GestureRecognizers>
                    <Label Text="Что такое One-Hot Encoding и в каких случаях его применяют?" FontSize="16"/>
                </Frame>
                <Label x:Name="answer2_topic3" 
                   Text="One-Hot Encoding — это метод преобразования категориальных (номинальных) признаков в числовой формат, при котором каждая уникальная категория становится отдельным бинарным (0/1) признаком. Например, признак цвет со значениями [красный, синий, зеленый] превращается в три отдельных признака: is_red, is_blue, is_green. Этот метод применяется, когда у категорий нет естественного порядкового соотношения (например, названия городов или типы товаров). Он предотвращает ложное предположение алгоритма о том, что одна категория больше или важнее другой, что могло бы произойти при простом числовом кодировании (Label Encoding)."
                   IsVisible="False"
                   Padding="10,20,10,10" />
            </StackLayout>
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>